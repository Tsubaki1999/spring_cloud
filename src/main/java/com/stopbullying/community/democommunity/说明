由controller来处理浏览器的请求
其会调用service组件去处理当前的业务
service组件会调用dao去访问数据库
其互相依赖的关系可以靠依赖注入来实现

视图层代码放在templates和controller中
service为业务层
dao为数据访问层

static处理GET和POST请求
templates处理HTML请求

entity为实体类用于接受数据，需要访问数据库需要在dao中建立mapper接口，接口用来写实体的方法
再通过mapper文件夹中的.xml文件创建映射，来实现方法

第一次总结，开发顺序，按照从数据库到web的顺序即dao->service->controller,
数据访问层->业务层->视图层


3.1
过滤敏感词
1.定义前缀树
2.根据敏感词初始化前缀树
3.编写过滤敏感词方法

3.3
帖子详细
DiscussPostMapper
DiscussPostService
DiscussPostController
index.html
帖子标题上添加访问详细的链接
discuss-detail.html
处理静态资源访问路径
复用index.html的header
显示标题，作者，发布时间，帖子正文等

3.4
事务管理
原子性，一致性，隔离性，持久性
事务隔离，解决更新，读取出现的问题
不隔离可能导致
第一类丢失更新:一个事务回滚导致另一个事物更新的数据丢失
脏读:一个事物的提交导致第二个事物的更新丢失
第二类丢失更新:一个事物读取了另一个事物未提交的数据
不可重复读:一个事物对一个数据前后读取结果不一样
幻读:一个事物对一个表前后查询到的行数不一致
隔离级别越高性能越低
数据库悲观锁，共享锁s和排他锁x
自定义乐观锁，更新数据前检查版本号

3.5
显示评论
数据层
-根据实体查询一页评论数据
-根据实体查询评论数量
业务层
-处理查询评论的业务
-处理查询评论数量的业务
表现层
-显示帖子详细数据时
-同时显示该帖子的所有评论数据

3.6
添加评论
数据层 CommentMapper,comment-mapper,DiscussPostMapper，discusspost-mapper
-添加评论数据
-修改帖子的评论数量
业务层 DiscussPostService,CommentService
-处理添加评论的业务
 先增加评论再更新帖子的评论数量
表现层 CommentController
-处理添加评论数据的请求
-设置添加评论的表单

3.7
私信列表
-查询当前用户的会话列表
 每个会话只会显示最新的一条私信
-支持分页显示
私信详细
-查询某个会话包含的私信
-支持分页显示

Message,MessageMapper,message-mapper
MessageService
MessageController,letter,letter-detail

显示会话详情

3.8
发送私信
MessageMapper,message-mapper
MessageService
MessageController,letter.js

3.9
统一处理异常
->表现层->业务层->数据层
出现错误会上抛，可以统一处理表现层异常
@ControllerAdvice
-用于修饰类，表示该类为Controller全局配置类，可以做异常处理方案，绑定数据方案，绑定参数方案
@ExceptionHandler
-用于修饰方法，会在Controller出现异常后被调用，处理捕获异常
HomeController ExceptionAdvice

3.10
统一记录日志
AOP面向方面编程，横切多个业务组件
对OOP的扩展
声明切点pointcut
通知advice
将代码额外定义到aspect方面组件中，织入到target的连接点joinPoint中
springAOP
-JDK动态代理，需要目标对象接口，创建代理实例
CGlib动态代理
-采用底层字节码技术，运行时创建子类代理实例
-目标不存在接口时，springAOP会采用该方法
AlphaAspect ServiceLogAspect

4.1
redis

4.2
spring整合redis
application.properties配置
RedisConfig配置
RedisTests测试

4.3
点赞
面向其key来编程
KeyUtil定义实体类型
LikeService定义查询点赞服务的方法
LikeController发送点赞的post请求
DiscussPostController添加点赞的显示
discuss.js确定页面上如何显示列表
discuss-detail和index修改页面上赞的显示

4.4
我收到的赞
RedisKeyUtil增加一个redis的值
LikeService重写点赞方法，添加查询某个用户的赞的数量的方法
LikeController添加新的需要接收的参数entityUserId
discuss-detail添加需要传入的参数
discuss.js添加传入参数
UserController添加个人主页
index.html等页面处理用户访问路径
profile.html处理个人界面

4.5
关注，取消关注
RedisKeyUtil定义存储数据类型
FollowService
FollowController,需要添加拦截器检测用户是否登录
profile.html关注按钮处理，关注人数，对自己不能关注
profile.js处理异步请求
CommunityConstant添加实体类型用户
UserController里添加用户关注相关信息

4.6
关注列表和粉丝列表
FollowService处理业务层添加查询方法
FollowController定义方法
followee和follower页面处理

4.7
优化登录模块
redisUtil定义验证码
重构LoginController中的验证码功能
redis存登录凭证
LoginTicketMapper弃用
UserService

5.1
阻塞队列